{% extends "base.html" %}
{% block title %}
Processed Data
{% endblock %}
{% block breadcrumb %}
{% endblock %}
{% block header %}
	<link rel="stylesheet" href="/media/css/chosen.css" />
	<link rel="stylesheet" href="/media/css/rickshaw.min.css" />
	<link rel="stylesheet" href="/media/css/chart.css" />
{% endblock %}
{% block content %}

<form action="{{ base_url|url('') }}">
<ul class='tabs'>
	<li>
		<div class="input_background system-charts-dropdown">
		<select id='processed-select' name='selected_data' style="width:200px;" tabindex="3" multiple="" data-placeholder="Select">
			{% for p in all_processed_list %}
				<option {% if p in selected_data %}selected='selected' {% endif %} value="{{ p }}">{{ p }}</option>
			{% endfor %}
		</select>
		</div>
	</li>
	<li>
		<label for="">From:</label>
		<div class="input_background">
			<input type="text" name='date_from' id="date_from" value="{{ date_from|date }}" />
		</div>
	</li>
	<li>
		<label for="">To:</label>
		<div class="input_background">
			<input type="text" name='date_to' id="date_to" value="{{ date_to|date }}" />
		</div>
	</li>
	<li class='with_button'>
	<input type="submit" class='button update' value="Update" />
	</li>
</ul>
</form>

{% for processed in processed_list %}
    {% set sanitized_processed = processed|clean_slashes %}
    <h2>{{ processed }}</h2>
{% endfor %}

{% endblock %}
{% block js %}
<script type="text/javascript" charset="utf-8" src='/media/js/charts.min.js'></script>
<script type="text/javascript" src='/media/js/jquery-ui.min.js'></script>
<script type="text/javascript" src='/media/js/jquery-ui-timepicker-addon.js'></script>
<script type="text/javascript" src='/media/js/chosen/chosen.jquery.min.js'></script>
<script type="text/javascript">
$(function()  {
    // Common variables and functions
    var width = 865;
    var height = 200;
    var padding = { top: 0.09, right: 0, bottom: 0, left: 0 } 
    function _format_date(date) {
        _date = new Date(date*1000).toUTCString();
		return '<span class="date">'+ moment.utc(_date).format("DD.MM.YY H:mm:ss") + '</span>';
    }
    var colors = ['#00ADFC', '#7AB317', '#8000A9']   

{% for processed in processed_data %}
{% set sanitized_processed = processed|clean_slashes %}

{% endfor %}{# processed #}

var datetime_options = {
	separator: '-',
	dateFormat: 'dd-mm-yy',
	timeFormat: 'hh:mm',
	hourGrid: 2,
	minuteGrid: 10,
	maxDate: new Date({{ max_date*1000 }})

};
$('#date_from').datetimepicker(datetime_options);
$('#date_to').datetimepicker(datetime_options);
$("#processed-select").chosen();

});
</script>

{% endblock %}
